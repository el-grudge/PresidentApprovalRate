p + l + s + r + pr + lb
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = 1/category))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = category, alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = category))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = category, alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb
p + l + s + r + pr + lb + theme_fivethirtyeight()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = category))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = category, alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = category))
p + l + s + r + pr + lb + theme_fivethirtyeight()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = category))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = category, alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = category, alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight()
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = category))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = category, alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = category))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = category, alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = category))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = category, alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + guides(color = guide_legend(reverse = TRUE))
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + guides(color = guide_legend(reverse = TRUE))
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + guides(color = guide_legend(reverse = FALSE))
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight(legend.position = "none")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = "fivethirtyeight"))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = "fivethirtyeight"))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = "fivethirtyeight", alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = "fivethirtyeight"))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = "fivethirtyeight"))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_label_repel()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_label()
p <- ggplot(mtcars, aes(wt, mpg, label = rownames(mtcars)))
p + geom_text()
p + geom_text(check_overlap = TRUE)
p + geom_label()
p + geom_text(size = 10)
p + geom_point() + geom_text(hjust = 0, nudge_x = 0.05)
p + geom_point() + geom_text(vjust = 0, nudge_y = 0.5)
p + geom_point() + geom_text(angle = 45)
p + geom_text(family = "Times New Roman")
p + geom_text(aes(colour = factor(cyl)))
p + geom_text(aes(colour = factor(cyl))) +
scale_colour_discrete(l = 40)
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text(label = rating)
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text(label = estimate)
View(df)
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text(label = "estimate")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category), label = estimate))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category), label = estimate))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text(data = tail(df$estimate))
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category), label = estimate))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text(data = tail(df["estimate"]))
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text(data = tail(df["estimate"], 1), aes(label = estimate))
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none")
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category), label = tail(estimate, 1)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text()
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none") + geom_text(data = df, aes(label = tail(estimate, 1)))
p <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates from Voters")
p + l + s + r + pr + lb + theme_fivethirtyeight() + theme(legend.position = "none")
savehistory("~/R/Projects/CAP6737_INTERACTIVE_DATA_VIZ/ASSIGNMENT2/.Rhistory")
View(approval_topline)
df <- subset(approval_topline, -president, -timestamp)
df <- subset(approval_topline, select = -c(president, timestamp))
View(df)
df$date <- as.Date(df$modeldate, "%m/%d/%Y)
""
)
""
df$date <- as.Date(df$modeldate, "%m/%d/%Y")
View(df)
df <- subset(df, select = -c(modeldate))
View(df)
subset(df, select = -contains("dis")) %>% head
subset(df, select = contains("dis")) %>% head
subset(df, select = contains("dis")) %>% head()
subset(df, select = contains(dis)) %>% head()
subset(df, select = contains("dis")) %>% head()
df_a <- select(df, -contains("dis"))
View(df_a)
df_d <- select(df, -approve_estimate, -approve_hi, -approve_lo)
View(df_d)
df_a <- rename(df_a, estimate = approve, hi = approve_hi, lo = approve_lo)
df_a <- rename(df_a, estimate = approve_estimate, hi = approve_hi, lo = approve_lo)
df_d <- rename(df_d, estimate = disapprove_estimate, hi = disapprove_hi, lo = disapprove_lo)
df_a$category <- "approve"
View(df_a)
df_d$category <- "disapprove"
df <- rbind(df_a, df_d)
view(df)
unique(df$subgroup)
p_v <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)))
p_a <- ggplot(filter(df, subgroup == "Adults"), aes(x = date, y = estimate, color = rev(category)))
p_p <- ggplot(filter(df, subgroup == "All polls"), aes(x = date, y = estimate, color = rev(category)))
l <- geom_line()
s <- geom_smooth()
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001))
pr_v <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
pr_a <- geom_pointrange(data = filter(filter(df, subgroup == "Adults"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
pr_p <- geom_pointrange(data = filter(filter(df, subgroup == "All polls"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb_v <- labs(title = "Presidents approval and disapproval rates from Voters")
lb_a <- labs(title = "Presidents approval and disapproval rates from Adults")
lb_p <- labs(title = "Presidents approval and disapproval rates from All polls")
p_v + l + s + r + pr_v + lb_v + theme_fivethirtyeight() + theme(legend.position = "none")
p_a + l + s + r + pr_a + lb_a + theme_fivethirtyeight() + theme(legend.position = "none")
p_p + l + s + r + pr_p + lb_p + theme_fivethirtyeight() + theme(legend.position = "none")
p + l + s + r + pr + lb + facet_grid(vars(subgroup)) + theme_fivethirtyeight() + theme(legend.position = "none")
p <- ggplot(df, aes(x = date, y = estimate, color = rev(category)))
pr <- geom_pointrange(data = filter(date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
pr <- geom_pointrange(data = filter(df, date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi))
lb <- labs(title = "Presidents approval and disapproval rates")
p + l + s + r + pr + lb + facet_grid(vars(subgroup)) + theme_fivethirtyeight() + theme(legend.position = "none")
# loading libraries
library(tidyverse);
library(ggthemes);
# loading data
approval_topline <- read.csv("https://projects.fivethirtyeight.com/trump-approval-data/approval_topline.csv");
# data wrangling
df <- subset(approval_topline, select = -c(president, timestamp));
df$date <- as.Date(df$modeldate, "%m/%d/%Y");
df <- subset(df, select = -c(modeldate));
df_a <- select(df, -contains("dis"));
df_d <- select(df, -approve_estimate, -approve_hi, -approve_lo);
df_a <- rename(df_a, estimate = approve_estimate, hi = approve_hi, lo = approve_lo);
df_d <- rename(df_d, estimate = disapprove_estimate, hi = disapprove_hi, lo = disapprove_lo);
df_a$category <- "approve";
df_d$category <- "disapprove";
df <- rbind(df_a, df_d);
# plotting
p <- ggplot(df, aes(x = date, y = estimate, color = rev(category)));
p_v <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)));
p_a <- ggplot(filter(df, subgroup == "Adults"), aes(x = date, y = estimate, color = rev(category)));
p_p <- ggplot(filter(df, subgroup == "All polls"), aes(x = date, y = estimate, color = rev(category)));
l <- geom_line() ;
s <- geom_smooth() ;
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001)) ;
pr <- geom_pointrange(data = filter(df, date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_v <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_a <- geom_pointrange(data = filter(filter(df, subgroup == "Adults"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_p <- geom_pointrange(data = filter(filter(df, subgroup == "All polls"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
lb <- labs(title = "Presidents approval and disapproval rates");
lb_v <- labs(title = "Presidents approval and disapproval rates from Voters");
lb_a <- labs(title = "Presidents approval and disapproval rates from Adults");
lb_p <- labs(title = "Presidents approval and disapproval rates from All polls");
g <- geom_text(data = filter(df, date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_v <- geom_text(data = filter(filter(df, subgroup == "Voters"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_a <- geom_text(data = filter(filter(df, subgroup == "Adults"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_p <- geom_text(data = filter(filter(df, subgroup == "All polls"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
p + l + s + r + pr + lb + facet_grid(vars(subgroup)) + theme_fivethirtyeight() + theme(legend.position = "none") + g;
p_v + l + s + r + pr_v + lb_v + theme_fivethirtyeight() + theme(legend.position = "none") + g_v;
p_a + l + s + r + pr_a + lb_a + theme_fivethirtyeight() + theme(legend.position = "none") + g_a;
p_p + l + s + r + pr_p + lb_p + theme_fivethirtyeight() + theme(legend.position = "none") + g_p
# loading libraries
library(tidyverse);
library(ggthemes);
# loading data
approval_topline <- read.csv("https://projects.fivethirtyeight.com/trump-approval-data/approval_topline.csv");
# data wrangling
df <- subset(approval_topline, select = -c(president, timestamp));
df$date <- as.Date(df$modeldate, "%m/%d/%Y");
df <- subset(df, select = -c(modeldate));
df_a <- select(df, -contains("dis"));
df_d <- select(df, -approve_estimate, -approve_hi, -approve_lo);
df_a <- rename(df_a, estimate = approve_estimate, hi = approve_hi, lo = approve_lo);
df_d <- rename(df_d, estimate = disapprove_estimate, hi = disapprove_hi, lo = disapprove_lo);
df_a$category <- "approve";
df_d$category <- "disapprove";
df <- rbind(df_a, df_d);
# plotting
p <- ggplot(df, aes(x = date, y = estimate, color = rev(category)));
p_v <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)));
p_a <- ggplot(filter(df, subgroup == "Adults"), aes(x = date, y = estimate, color = rev(category)));
p_p <- ggplot(filter(df, subgroup == "All polls"), aes(x = date, y = estimate, color = rev(category)));
l <- geom_line() ;
s <- geom_smooth() ;
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001)) ;
pr <- geom_pointrange(data = filter(df, date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_v <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_a <- geom_pointrange(data = filter(filter(df, subgroup == "Adults"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_p <- geom_pointrange(data = filter(filter(df, subgroup == "All polls"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
lb <- labs(title = "Presidents approval and disapproval rates - Grid");
lb_v <- labs(title = "Presidents approval and disapproval rates from Voters");
lb_a <- labs(title = "Presidents approval and disapproval rates from Adults");
lb_p <- labs(title = "Presidents approval and disapproval rates from All polls");
g <- geom_text(data = filter(df, date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_v <- geom_text(data = filter(filter(df, subgroup == "Voters"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_a <- geom_text(data = filter(filter(df, subgroup == "Adults"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_p <- geom_text(data = filter(filter(df, subgroup == "All polls"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
p + l + s + r + pr + lb + facet_grid(vars(subgroup)) + theme_fivethirtyeight() + theme(legend.position = "none") + g;
p_v + l + s + r + pr_v + lb_v + theme_fivethirtyeight() + theme(legend.position = "none") + g_v;
p_a + l + s + r + pr_a + lb_a + theme_fivethirtyeight() + theme(legend.position = "none") + g_a;
p_p + l + s + r + pr_p + lb_p + theme_fivethirtyeight() + theme(legend.position = "none") + g_p
# loading libraries
library(tidyverse);
library(ggthemes);
# loading data
approval_topline <- read.csv("https://projects.fivethirtyeight.com/trump-approval-data/approval_topline.csv");
# data wrangling
df <- subset(approval_topline, select = -c(president, timestamp));
df$date <- as.Date(df$modeldate, "%m/%d/%Y");
df <- subset(df, select = -c(modeldate));
df_a <- select(df, -contains("dis"));
df_d <- select(df, -approve_estimate, -approve_hi, -approve_lo);
df_a <- rename(df_a, estimate = approve_estimate, hi = approve_hi, lo = approve_lo);
df_d <- rename(df_d, estimate = disapprove_estimate, hi = disapprove_hi, lo = disapprove_lo);
df_a$category <- "approve";
df_d$category <- "disapprove";
df <- rbind(df_a, df_d);
# plotting
p <- ggplot(df, aes(x = date, y = estimate, color = rev(category)));
p_v <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)));
p_a <- ggplot(filter(df, subgroup == "Adults"), aes(x = date, y = estimate, color = rev(category)));
p_p <- ggplot(filter(df, subgroup == "All polls"), aes(x = date, y = estimate, color = rev(category)));
l <- geom_line() ;
s <- geom_smooth() ;
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001)) ;
pr <- geom_pointrange(data = filter(df, date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_v <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_a <- geom_pointrange(data = filter(filter(df, subgroup == "Adults"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_p <- geom_pointrange(data = filter(filter(df, subgroup == "All polls"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
lb <- labs(title = "Presidents approval and disapproval rates - Grid");
lb_v <- labs(title = "Presidents approval and disapproval rates from Voters");
lb_a <- labs(title = "Presidents approval and disapproval rates from Adults");
lb_p <- labs(title = "Presidents approval and disapproval rates from All polls");
g <- geom_text(data = filter(df, date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_v <- geom_text(data = filter(filter(df, subgroup == "Voters"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_a <- geom_text(data = filter(filter(df, subgroup == "Adults"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_p <- geom_text(data = filter(filter(df, subgroup == "All polls"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
p + l + s + r + pr + lb + facet_grid(vars(subgroup)) + theme_fivethirtyeight() + theme(legend.position = "none") + g;
p_v + l + s + r + pr_v + lb_v + theme_fivethirtyeight() + theme(legend.position = "none") + g_v;
p_a + l + s + r + pr_a + lb_a + theme_fivethirtyeight() + theme(legend.position = "none") + g_a;
p_p + l + s + r + pr_p + lb_p + theme_fivethirtyeight() + theme(legend.position = "none") + g_p
p_v + l + s + r + lb_v + theme_fivethirtyeight() + theme(legend.position = "none") + g_v;
p_v + l + s + r + lb_v + theme_fivethirtyeight() + theme(legend.position = "none") + g_v + pr_v
p
p + l
p + l + s
p + l + s + r
p + l + s
p + l + s + r
p + l + s + r + pr
p_v + l + s + r + pr
p_v + l + s + r + pr_v
pr_v <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, y = estimate, ymin = lo, ymax = hi));
p_v + l + s + r + pr_v
View(df)
View(approval_topline)
p_v + l + r + pr_v
# loading libraries
library(tidyverse);
library(ggthemes);
# loading data
approval_topline <- read.csv("https://projects.fivethirtyeight.com/trump-approval-data/approval_topline.csv");
install.packages("ggthemes")
# loading data
approval_topline <- read.csv("https://projects.fivethirtyeight.com/trump-approval-data/approval_topline.csv");
# data wrangling
df <- subset(approval_topline, select = -c(president, timestamp));
df$date <- as.Date(df$modeldate, "%m/%d/%Y");
df <- subset(df, select = -c(modeldate));
df_a <- select(df, -contains("dis"));
df_d <- select(df, -approve_estimate, -approve_hi, -approve_lo);
df_a <- rename(df_a, estimate = approve_estimate, hi = approve_hi, lo = approve_lo);
df_d <- rename(df_d, estimate = disapprove_estimate, hi = disapprove_hi, lo = disapprove_lo);
df_a$category <- "approve";
df_d$category <- "disapprove";
df <- rbind(df_a, df_d);
View(df)
# loading libraries
library(tidyverse);
library(ggthemes);
# loading data
approval_topline <- read.csv("https://projects.fivethirtyeight.com/trump-approval-data/approval_topline.csv");
# data wrangling
df <- subset(approval_topline, select = -c(president, timestamp));
df$date <- as.Date(df$modeldate, "%m/%d/%Y");
df <- subset(df, select = -c(modeldate));
df_a <- select(df, -contains("dis"));
df_d <- select(df, -approve_estimate, -approve_hi, -approve_lo);
df_a <- rename(df_a, estimate = approve_estimate, hi = approve_hi, lo = approve_lo);
df_d <- rename(df_d, estimate = disapprove_estimate, hi = disapprove_hi, lo = disapprove_lo);
df_a$category <- "approve";
df_d$category <- "disapprove";
df <- rbind(df_a, df_d);
# plotting
p <- ggplot(df, aes(x = date, y = estimate, color = rev(category)));
p_v <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)));
p_a <- ggplot(filter(df, subgroup == "Adults"), aes(x = date, y = estimate, color = rev(category)));
p_p <- ggplot(filter(df, subgroup == "All polls"), aes(x = date, y = estimate, color = rev(category)));
l <- geom_line() ;
s <- geom_smooth() ;
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001)) ;
pr <- geom_pointrange(data = filter(df, date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_v <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_a <- geom_pointrange(data = filter(filter(df, subgroup == "Adults"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
pr_p <- geom_pointrange(data = filter(filter(df, subgroup == "All polls"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
lb <- labs(title = "Presidents approval and disapproval rates - Grid");
lb_v <- labs(title = "Presidents approval and disapproval rates from Voters");
lb_a <- labs(title = "Presidents approval and disapproval rates from Adults");
lb_p <- labs(title = "Presidents approval and disapproval rates from All polls");
g <- geom_text(data = filter(df, date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_v <- geom_text(data = filter(filter(df, subgroup == "Voters"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_a <- geom_text(data = filter(filter(df, subgroup == "Adults"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
g_p <- geom_text(data = filter(filter(df, subgroup == "All polls"), date == max(date)), aes(label = estimate), hjust = -0.1, vjust = +1)
p + l + s + r + pr + lb + facet_grid(vars(subgroup)) + theme_fivethirtyeight() + theme(legend.position = "none") + g;
p_v + l + s + r + pr_v + lb_v + theme_fivethirtyeight() + theme(legend.position = "none") + g_v;
p_a + l + s + r + pr_a + lb_a + theme_fivethirtyeight() + theme(legend.position = "none") + g_a;
p_p + l + s + r + pr_p + lb_p + theme_fivethirtyeight() + theme(legend.position = "none") + g_p
df
p_v <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)));
l <- geom_line() ;
s <- geom_smooth() ;
r <- geom_ribbon(aes(ymin = lo, ymax = hi, fill = rev(category), alpha = 0.001)) ;
pr_v <- geom_pointrange(data = filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week"))), aes(x = date, ymin = lo, ymax = hi));
p_v + l + s + r + pr_v + lb_v + theme_fivethirtyeight() + theme(legend.position = "none") + g_v;
p_v <- ggplot(filter(df, subgroup == "Voters"), aes(x = date, y = estimate, color = rev(category)));
l <- geom_line() ;
p_v + l
p_v + l + s
p_v + l + r
p_v + r
filter(df, subgroup == "Voters")
df
filter(df, subgroup == "Voters")
filter(filter(df, subgroup == "Voters"), date == as.Date(cut(date, breaks = "6 week")))
